<div class="flex justify-content-center align-items-center">
  <!-- RECENTLY PLAYED -->
  <section class="flex flex-column gap-5 w-8 lg:w-8 md:w-11 sm:w-11 w-11">
    <div class="flex justify-content-center">
      <h1 class="m-0">Recently played</h1>
    </div>

    <!-- SKELETON -->
    <p-dataView [value]="skeletonElements" *ngIf="isLoading.currentlyPlayed">
      <ng-template pTemplate="list" let-trackPlayed>
        <div class="flex flex-column justify-content-start">
          <div
            *ngFor="
              let i of skeletonElements;
              let first = first;
              let index = index
            "
          >
            <div
              class="flex justify-content-between align-items-center gap-3 p-1 pt-2 px-1 py-3"
              [ngClass]="{ 'border-top-1 surface-border': !first }"
            >
              <p-skeleton
                width="2.5rem"
                height="2.5rem"
                shape="circle"
              ></p-skeleton>

              <p-skeleton width="3rem" height="3rem"></p-skeleton>

              <div class="flex flex-column justify-content-start flex-1 gap-1">
                <p-skeleton
                  [width]="generateRandomWidth(30, 80)"
                  height="1rem"
                ></p-skeleton>
                <p-skeleton
                  [width]="generateRandomWidth(30, 80)"
                  height="1rem"
                ></p-skeleton>
              </div>

              <div class="flex justify-content-end w-3">
                <p-skeleton
                  class="w-full flex justify-content-end"
                  [width]="generateRandomWidth(50, 100)"
                  height="1rem"
                ></p-skeleton>
              </div>
            </div>
          </div>
        </div>
      </ng-template>
    </p-dataView>

    <!-- DATA -->
    <p-dataView #dv [value]="tracksPlayed" *ngIf="!isLoading.currentlyPlayed">
      <ng-template pTemplate="empty">
        <div class="flex align-items-center justify-content-center h-12rem">
          <h3>No data</h3>
        </div>
      </ng-template>

      <ng-template pTemplate="list">
        <div class="flex flex-column justify-content-start">
          <div
            *ngFor="let trackPlayed of tracksPlayed; let first = first"
            class="flex justify-content-between align-items-center gap-3 hover:shadow-8 px-1 py-3"
            [ngClass]="{ 'border-top-1 surface-border': !first }"
          >
            <div class="w-2rem h-2rem">
              <app-audio-player
                [urlPreview]="trackPlayed.track.preview_url"
              ></app-audio-player>
            </div>
            <div class="w-3rem h-3rem overflow-hidden">
              <p-image
                [src]="trackPlayed.track.album.images[0].url"
                [alt]="trackPlayed.track.name"
                width="100%"
              >
              </p-image>
            </div>
            <div class="flex flex-column justify-content-start flex-1">
              <div class="font-medium">
                {{ trackPlayed.track.name }}
              </div>
              <div class="text-400 font-medium">
                {{ trackPlayed.track.artists[0].name }}
              </div>
            </div>
            <div class="font-bold text-600">
              {{ trackPlayed.played_at | timeFromNow : "en" }}
            </div>
          </div>
        </div>
      </ng-template>
    </p-dataView>
  </section>
</div>
